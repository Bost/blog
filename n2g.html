<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2023-12-22 Fri 16:43 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>N2G</title>
<meta name="author" content="Rostislav Svoboda" />
<meta name="generator" content="Org Mode" />
<style>
  #content { max-width: 60em; margin: auto; }
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #e6e6e6;
    border-radius: 3px;
    background-color: #f2f2f2;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: auto;
  }
  pre.src:before {
    display: none;
    position: absolute;
    top: -8px;
    right: 12px;
    padding: 3px;
    color: #555;
    background-color: #f2f2f299;
  }
  pre.src:hover:before { display: inline; margin-top: 14px;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-authinfo::before { content: 'Authinfo'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { }
</style>
<link rel="stylesheet" type="text/css" href="style.css" />
<style> body { /* some ad-hoc css styling */ } </style>
<script>
  window.MathJax = {
    tex: {
      ams: {
        multlineWidth: '85%'
      },
      tags: 'ams',
      tagSide: 'right',
      tagIndent: '.8em'
    },
    chtml: {
      scale: 1.0,
      displayAlign: 'center',
      displayIndent: '0em'
    },
    svg: {
      scale: 1.0,
      displayAlign: 'center',
      displayIndent: '0em'
    },
    output: {
      font: 'mathjax-modern',
      displayOverflow: 'overflow'
    }
  };
</script>

<script
  id="MathJax-script"
  async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
</script>
</head>
<body>
<div id="content" class="content">
<h1 class="title">N2G</h1>

<div id="outline-container-org1bc2e6a" class="outline-2">
<h2 id="org1bc2e6a"><span class="section-number-2">1.</span> Normalizing and Commonalities</h2>
<div class="outline-text-2" id="text-1">
<p>
Define: <br />
</p>
<ul class="org-ul">
<li><p>
Sets of package names \(N\), \(G\) of packages available for Nix and Guix:
</p>
\begin{align*}
    N &= \{p_1 ,p_2, \dots p_m\} \subseteq \Sigma^* \\
    G &= \{p_1 ,p_2, \dots p_n\} \subseteq \Sigma^*
\end{align*}</li>
<li><p>
Functions for normalizing package names for Nix and Guix with signatures:
</p>
\begin{align*}
    f_{pN} : N \rightarrow \Sigma^* \\
    f_{pG} : G \rightarrow \Sigma^*
\end{align*}
<p>
defined as
</p>

\begin{align*}
     \forall n \in N, f_{nN}(n) &= TODO \\
     \forall g \in G, f_{nG}(g) &= TODO \\
\end{align*}
<p>
and the domains of \(f_{pN}\), \(f_{pG}\) are sets of normalized strings
</p>
\begin{align*}
    N' &= \{ f_{pN}(n) \mid n \in N \} \\
    G' &= \{ f_{pG}(g) \mid g \in G \}
\end{align*}</li>

<li><p>
The intersection \(P\) (omitting the superscript \('\) at \(P\)):
</p>
\begin{align*}
    P = N' \cap G'
\end{align*}
<p>
is a set of normalized names of packages available in both operating systems.
</p></li>
</ul>
</div>
</div>

<div id="outline-container-org99aa73e" class="outline-2">
<h2 id="org99aa73e"><span class="section-number-2">2.</span> Package complexity and Ordering</h2>
<div class="outline-text-2" id="text-2">
<p>
Define: <br />
</p>
<ul class="org-ul">
<li><p>
Function for computing package definition complexity in Nix and Guix with
signatures:
</p>
\begin{align*}
    f_{cN} : P \rightarrow \mathbb{N} \\
    f_{cG} : P \rightarrow \mathbb{N}
\end{align*}
<p>
defined as "The more complex a package definition is the higher complexity
level the it has." <br />
</p>
\begin{align*}
    \forall p\in P, f_{cN}(p) = TODO \\
    \forall p\in P, f_{cG}(p) = TODO
\end{align*}
<p>
and the domains of \(f_{cN}\), \(f_{cG}\) are sets of complexities
</p>
\begin{align*}
     C_{N} = \{ f_{cN}(p) \mid p \in P \} &= \{0, \ldots, n_{N}\} \\
     C_{G} = \{ f_{cG}(p) \mid p \in P \} &= \{0, \ldots, m_{G}\}
\end{align*}</li>
</ul>

<p>
However the basic complexity levels in Nix \(C_{N}\) and Guix \(C_{G}\) have
(probably) different cardinalities \(n_N \neq m_G\), since they are independent
from each other and must be further normalized. I.e. some mapping (e.g. grouping
of the basic levels) must be defined so that the normalized complexity levels
correspond to each other. <br />
It will be probably a surjective mapping (i.e. an epimorphism)
\(\twoheadrightarrow\) (since all complexity levels of \(C_{G}\) must be covered)
<br />
For that purpose define
</p>
<ul class="org-ul">
<li>Normalization domain \(C = C_{G}\)</li>
<li><p>
Normalization functions with signatures
</p>
\begin{align*}
   f_{nN} : C_{N} \rightarrow C \\
   f_{nG} : C_{G} \rightarrow C
\end{align*}
<p>
I.e.
</p>

\begin{align*}
   f_{nN} : C_{N} \twoheadrightarrow C_{G} \\
   f_{nG} : C_{G} \rightarrowtail C_{G}
\end{align*}
<p>
defined as
</p>
\begin{align*}
   \forall c_{N} \in C_{N}, f_{nN}(c_{N}) &= TODO \\
   \forall c_{G} \in C_{G}, f_{nG}(c_{G}) &= \mathrm{id}(c_{G}) = c_{G}
\end{align*}
<p>
and the domains of \(f_{nN}\), \(f_{nG}\) are sets
</p>
\begin{align*}
    C = \{f_{nN}(c_{N}) &\mid c_{N} \in C_{N} \} = C_{G} \\
    C = \{f_{nG}(c_{G}) &\mid c_{G} \in C_{G} \} = C_{G}
\end{align*}</li>
</ul>

<ul class="org-ul">
<li><p>
The complexity normalization enables us to compute complexity distance for
every package \(p \in P\) compute complexity distance
</p>
\begin{align*}
   f_{d} : P \rightarrow \mathbb{N} \\
\end{align*}
<p>
where \(f_{d}\) is defined
</p>
\begin{align*}
     \forall p \in P, f_{d}(p) = \|f_{nN}(p) - f_{nG}(p)\| \\
\end{align*}
<p>
and the domain of \(f_{d}\) is a set of distances
</p>
\begin{align*}
     D = \{ f_{d}(p) \mid p \in P \} = \{ 0 \dots n\}
\end{align*}
<p>
where \(n\) is \(\max(n_{N}, m_{G})\).
In fact the \(n_{N}\), \(m_{G}\)
</p></li>

<li><p>
For every level of complexity \(c_i \in C = \{0 \ldots n\}\), select packages
from \(P\) for which
</p>
\begin{align*}
    f_{d}(p_{c_i}) = 0
\end{align*}
<p>
For packages with complexity level \(0 \dots n\):
</p>
\begin{gather*}
    P_{c_1d_0} = \{ p_{c_1} \in P \mid f_{d}(p_{c_1}) = 0\} \\
    \vdots \\
    P_{c_nd_0} = \{ p_{c_n} \in P \mid f_{d}(p_{c_n}) = 0\}
\end{gather*}</li>
</ul>



<p>
I.e. the complexity distance is 0 for every complexity level
</p>
</div>
</div>

<div id="outline-container-org713e1a2" class="outline-2">
<h2 id="org713e1a2"><span class="section-number-2">3.</span> Conversion</h2>
<div class="outline-text-2" id="text-3">
<ul class="org-ul">
<li>Convert the \(P_{c_1d_0} \dots P_{c_nd_0}\) packages.
This transformation / translation should be relatively simple.</li>
<li>Convert the packages which definitions complexity significantly differs
between the operating systems.
<ul class="org-ul">
<li>Simple on Nix (low \(_{c}\) level), complex on Guix (high \(_{c}\) level)</li>
<li>Complex on Nix (high \(_{c}\) level), simple on Guix (low \(_{c}\) level)</li>
</ul></li>
</ul>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="date">Date: December 22, 2023</p>
<p class="author">Author: Rostislav Svoboda</p>
<p class="date">Created: 2023-12-22 Fri 16:43</p>
<p class="validation"><a href="https://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>